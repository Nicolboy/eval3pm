<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcul Mental</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f8ff;
            text-align: center;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .instructions {
            text-align: left;
            background: #e6f3ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .question-display {
            font-size: 36px;
            color: #2c3e50;
            margin: 30px 0;
            font-weight: bold;
        }
        
        #answer {
            font-size: 24px;
            padding: 10px;
            width: 150px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 10px;
        }
        
        button {
            font-size: 18px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        .feedback {
            font-size: 20px;
            margin: 15px 0;
            min-height: 25px;
        }
        
        .correct { color: #27ae60; }
        .incorrect { color: #e74c3c; }
        
        .results {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .final-score {
            font-size: 48px;
            color: #2c3e50;
            margin: 20px 0;
        }
        
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Écran d'instructions -->
        <div id="start-screen">
            <h1>Questionnaire de calcul</h1>
            <div class="instructions">
                <h3>Instructions :</h3>
                <ul>
                    <li>60 questions de difficulté progressive</li>
                    <li>Questions 1-10 : Additions simples (1 chiffre)</li>
                    <li>Questions 11-20 : Soustractions simples</li>
                    <li>Questions 21-30 : Multiplications tables</li>
                    <li>Questions 31-40 : Divisions simples</li>
                    <li>Questions 41-50 : Calculs avec nombres à 2 chiffres</li>
                    <li>Questions 51-55 : Pourcentages faciles</li>
                    <li>Questions 56-58 : Statistiques et probabilités</li>
                    <li>Questions 59-60 : Mix d'opérations avancées</li>
                </ul>
                <p><strong>Tapez votre réponse et appuyez sur "Valider"</strong></p>
            </div>
            <button onclick="startQuiz()">Commencer</button>
        </div>

        <!-- Écran de quiz -->
        <div id="quiz-screen" class="hidden">
            <div class="stats">
                <span id="question-counter">Question 1 / 60</span>
                <span id="timer">Temps : 00:00</span>
                <span id="score-display">Score : 0 / 0</span>
            </div>
            
            <div class="question-display" id="question-text">7 + 3</div>
            
            <div>
                <input type="number" id="answer" placeholder="?" autofocus>
                <button onclick="checkAnswer()">Valider</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
        </div>

        <!-- Écran de résultats -->
        <div id="results-screen" class="hidden">
            <div class="results">
                <h2 id="final-message">Excellent travail !</h2>
                <div class="final-score" id="final-percentage">85%</div>
                <p><strong>Score final :</strong> <span id="final-score">51 / 60</span></p>
                <p><strong>Pourcentage :</strong> <span id="final-percent-text">85%</span></p>
                <p><strong>Temps total :</strong> <span id="final-time">05:32</span></p>
                <button onclick="restartQuiz()">Recommencer</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let startTime;
        let timerInterval;
        
        // Base de données des questions
        const questions = [
            // Questions 1-10: Additions simples (1 chiffre)
            {question: "3 + 5", answer: 8},
            {question: "7 + 2", answer: 9},
            {question: "4 + 6", answer: 10},
            {question: "8 + 1", answer: 9},
            {question: "5 + 4", answer: 9},
            {question: "2 + 7", answer: 9},
            {question: "6 + 3", answer: 9},
            {question: "9 + 1", answer: 10},
            {question: "4 + 5", answer: 9},
            {question: "3 + 6", answer: 9},
            
            // Questions 11-20: Soustractions simples
            {question: "9 - 3", answer: 6},
            {question: "8 - 5", answer: 3},
            {question: "10 - 4", answer: 6},
            {question: "7 - 2", answer: 5},
            {question: "9 - 6", answer: 3},
            {question: "8 - 3", answer: 5},
            {question: "10 - 7", answer: 3},
            {question: "9 - 4", answer: 5},
            {question: "8 - 6", answer: 2},
            {question: "10 - 5", answer: 5},
            
            // Questions 21-30: Multiplications tables
            {question: "3 × 4", answer: 12},
            {question: "5 × 6", answer: 30},
            {question: "7 × 8", answer: 56},
            {question: "4 × 9", answer: 36},
            {question: "6 × 7", answer: 42},
            {question: "8 × 5", answer: 40},
            {question: "9 × 3", answer: 27},
            {question: "2 × 9", answer: 18},
            {question: "7 × 6", answer: 42},
            {question: "8 × 4", answer: 32},
            
            // Questions 31-40: Divisions simples
            {question: "24 ÷ 6", answer: 4},
            {question: "35 ÷ 7", answer: 5},
            {question: "48 ÷ 8", answer: 6},
            {question: "27 ÷ 9", answer: 3},
            {question: "42 ÷ 6", answer: 7},
            {question: "36 ÷ 4", answer: 9},
            {question: "56 ÷ 8", answer: 7},
            {question: "45 ÷ 5", answer: 9},
            {question: "32 ÷ 4", answer: 8},
            {question: "49 ÷ 7", answer: 7},
            
            // Questions 41-50: Calculs avec nombres à 2 chiffres
            {question: "15 + 27", answer: 42},
            {question: "34 - 19", answer: 15},
            {question: "23 + 38", answer: 61},
            {question: "56 - 29", answer: 27},
            {question: "12 × 3", answer: 36},
            {question: "45 + 17", answer: 62},
            {question: "73 - 28", answer: 45},
            {question: "14 × 4", answer: 56},
            {question: "84 ÷ 4", answer: 21},
            {question: "39 + 26", answer: 65},
            
            // Questions 51-55: Pourcentages faciles
            {question: "50% de 20", answer: 10},
            {question: "25% de 40", answer: 10},
            {question: "10% de 80", answer: 8},
            {question: "75% de 20", answer: 15},
            {question: "20% de 50", answer: 10},
            
            // Questions 56-58: Statistiques et probabilités
            {question: "Moyenne de 8, 10, 12", answer: 10},
            {question: "Médiane de 3, 5, 7", answer: 5},
            {question: "Probabilité (sur 6) de tirer un 6 avec un dé", answer: 1},
            
            // Questions 59-60: Mix d'opérations avancées
            {question: "15 + 8 × 2", answer: 31},
            {question: "100 - 6 × 7", answer: 58}
        ];
        
        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            
            currentQuestionIndex = 0;
            correctAnswers = 0;
            totalQuestions = 0;
            startTime = new Date();
            
            startTimer();
            showQuestion();
        }
        
        function startTimer() {
            timerInterval = setInterval(function() {
                const now = new Date();
                const elapsed = Math.floor((now - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `Temps : ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }
        
        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endQuiz();
                return;
            }
            
            const question = questions[currentQuestionIndex];
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-counter').textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('score-display').textContent = `Score : ${correctAnswers} / ${totalQuestions}`;
            document.getElementById('answer').value = '';
            document.getElementById('answer').focus();
            document.getElementById('feedback').textContent = '';
        }
        
        function checkAnswer() {
            const userAnswer = parseFloat(document.getElementById('answer').value);
            const correctAnswer = questions[currentQuestionIndex].answer;
            const feedback = document.getElementById('feedback');
            
            totalQuestions++;
            
            if (userAnswer === correctAnswer) {
                correctAnswers++;
                feedback.textContent = '✓ Correct !';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = `✗ Incorrect. La réponse était ${correctAnswer}`;
                feedback.className = 'feedback incorrect';
            }
            
            setTimeout(function() {
                currentQuestionIndex++;
                showQuestion();
            }, 1500);
        }
        
        function endQuiz() {
            clearInterval(timerInterval);
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);
            const now = new Date();
            const totalTime = Math.floor((now - startTime) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            
            document.getElementById('final-score').textContent = `${correctAnswers} / ${totalQuestions}`;
            document.getElementById('final-percentage').textContent = `${percentage}%`;
            document.getElementById('final-percent-text').textContent = `${percentage}%`;
            document.getElementById('final-time').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Message selon le score
            let message;
            if (percentage >= 90) message = "Excellent travail !";
            else if (percentage >= 80) message = "Très bien !";
            else if (percentage >= 70) message = "Bien !";
            else if (percentage >= 60) message = "Peut mieux faire";
            else message = "Il faut réviser";
            
            document.getElementById('final-message').textContent = message;
        }
        
        function restartQuiz() {
            document.getElementById('results-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
        }
        
        // Gérer la touche Entrée
        document.getElementById('answer').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // Empêcher la soumission du formulaire
        document.getElementById('answer').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
