<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soutien Math√©matiques - Seconde Pro</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 28px;
        }
        
        .instructions {
            text-align: left;
            background: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 15px;
            border-left: 4px solid #3498db;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            font-size: 16px;
            font-weight: bold;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
        
        .question-display {
            font-size: 32px;
            color: #2c3e50;
            margin: 40px 0;
            font-weight: bold;
            text-align: center;
            background: #ecf0f1;
            padding: 25px;
            border-radius: 10px;
        }
        
        #answer {
            font-size: 22px;
            padding: 12px;
            width: 200px;
            text-align: center;
            border: 3px solid #3498db;
            border-radius: 8px;
            margin: 15px;
            background: #fff;
        }
        
        #answer:focus {
            outline: none;
            border-color: #2980b9;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }
        
        button {
            font-size: 18px;
            padding: 12px 25px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .feedback {
            font-size: 22px;
            margin: 20px 0;
            min-height: 30px;
            font-weight: bold;
        }
        
        .correct { 
            color: #27ae60; 
            background: #d5f4e6;
            padding: 10px;
            border-radius: 5px;
        }
        .incorrect { 
            color: #e74c3c; 
            background: #fadbd8;
            padding: 10px;
            border-radius: 5px;
        }
        
        .results {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .final-score {
            font-size: 64px;
            margin: 30px 0;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #3498db;
            transition: width 0.3s ease;
            border-radius: 10px;
        }
        
        .hidden { display: none; }
        
        .theme-indicator {
            background: #3498db;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 15px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- √âcran d'instructions -->
        <div id="start-screen">
            <h1>üßÆ Soutien Math√©matiques - Seconde Pro</h1>
            <div class="instructions">
                <h3>üìã Programme du questionnaire (80 questions) :</h3>
                <ul>
                    <li><strong>Questions 1-20 :</strong> Calculs de base (additions, soustractions, multiplications, divisions)</li>
                    <li><strong>Questions 21-35 :</strong> R√®gles de calcul (priorit√©s, parenth√®ses, puissances)</li>
                    <li><strong>Questions 36-55 :</strong> Num√©ration (d√©cimaux, fractions, conversions)</li>
                    <li><strong>Questions 56-80 :</strong> Pourcentages (calculs, applications, probl√®mes concrets)</li>
                </ul>
                <p><strong>‚è±Ô∏è Dur√©e estim√©e :</strong> 25-30 minutes</p>
                <p><strong>üéØ Objectif :</strong> R√©viser les bases essentielles pour la seconde professionnelle</p>
                <p><strong>üí° Conseil :</strong> Prenez votre temps, l'important c'est de comprendre !</p>
            </div>
            <button onclick="startQuiz()" style="font-size: 20px; padding: 15px 30px;">üöÄ Commencer le questionnaire</button>
        </div>

        <!-- √âcran de quiz -->
        <div id="quiz-screen" class="hidden">
            <div class="stats">
                <span id="question-counter">Question 1 / 80</span>
                <span id="timer">Temps : 00:00</span>
                <span id="score-display">Score : 0 / 0</span>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 1.25%"></div>
            </div>
            
            <div class="theme-indicator" id="theme-indicator">Calculs de base</div>
            
            <div class="question-display" id="question-text">15 + 23</div>
            
            <div style="text-align: center;">
                <input type="number" id="answer" placeholder="Votre r√©ponse" autofocus>
                <br>
                <button onclick="checkAnswer()">‚úì Valider</button>
                <button onclick="skipQuestion()" style="background: #95a5a6;">‚è≠Ô∏è Passer</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
        </div>

        <!-- √âcran de r√©sultats -->
        <div id="results-screen" class="hidden">
            <div class="results">
                <h2 id="final-message">Excellent travail !</h2>
                <div class="final-score" id="final-percentage">85%</div>
                <p><strong>üìä Score final :</strong> <span id="final-score">68 / 80</span></p>
                <p><strong>‚è±Ô∏è Temps total :</strong> <span id="final-time">25:32</span></p>
                <p><strong>üéØ Questions r√©ussies :</strong> <span id="final-percent-text">85%</span></p>
                
                <div id="detailed-results" style="margin-top: 20px; text-align: left;">
                    <h3>üìà D√©tail par th√®me :</h3>
                    <div id="theme-breakdown"></div>
                </div>
                
                <button onclick="restartQuiz()">üîÑ Recommencer</button>
                <button onclick="showMistakes()" style="background: #e74c3c;">‚ùå Voir les erreurs</button>
            </div>
        </div>
        
        <!-- √âcran des erreurs -->
        <div id="mistakes-screen" class="hidden">
            <h2>üìù R√©vision des erreurs</h2>
            <div id="mistakes-list"></div>
            <button onclick="backToResults()">‚Üê Retour aux r√©sultats</button>
        </div>
    </div>

    <script>
        // Variables globales
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let startTime;
        let timerInterval;
        let userAnswers = [];
        let themeScores = {
            "Calculs de base": {correct: 0, total: 0},
            "R√®gles de calcul": {correct: 0, total: 0},
            "Num√©ration": {correct: 0, total: 0},
            "Pourcentages": {correct: 0, total: 0}
        };
        
        // Base de donn√©es des questions avec th√®mes
        const questions = [
            // Questions 1-20: Calculs de base
            {question: "15 + 23", answer: 38, theme: "Calculs de base"},
            {question: "47 - 19", answer: 28, theme: "Calculs de base"},
            {question: "12 √ó 8", answer: 96, theme: "Calculs de base"},
            {question: "84 √∑ 4", answer: 21, theme: "Calculs de base"},
            {question: "156 + 278", answer: 434, theme: "Calculs de base"},
            {question: "503 - 187", answer: 316, theme: "Calculs de base"},
            {question: "25 √ó 16", answer: 400, theme: "Calculs de base"},
            {question: "144 √∑ 12", answer: 12, theme: "Calculs de base"},
            {question: "89 + 156", answer: 245, theme: "Calculs de base"},
            {question: "321 - 158", answer: 163, theme: "Calculs de base"},
            {question: "18 √ó 15", answer: 270, theme: "Calculs de base"},
            {question: "225 √∑ 15", answer: 15, theme: "Calculs de base"},
            {question: "234 + 567", answer: 801, theme: "Calculs de base"},
            {question: "800 - 347", answer: 453, theme: "Calculs de base"},
            {question: "24 √ó 12", answer: 288, theme: "Calculs de base"},
            {question: "336 √∑ 14", answer: 24, theme: "Calculs de base"},
            {question: "145 + 289", answer: 434, theme: "Calculs de base"},
            {question: "600 - 245", answer: 355, theme: "Calculs de base"},
            {question: "35 √ó 8", answer: 280, theme: "Calculs de base"},
            {question: "512 √∑ 16", answer: 32, theme: "Calculs de base"},

            // Questions 21-35: R√®gles de calcul
            {question: "3 + 5 √ó 2", answer: 13, theme: "R√®gles de calcul"},
            {question: "20 - 4 √ó 3", answer: 8, theme: "R√®gles de calcul"},
            {question: "(8 + 2) √ó 3", answer: 30, theme: "R√®gles de calcul"},
            {question: "15 √∑ 3 + 7", answer: 12, theme: "R√®gles de calcul"},
            {question: "2 √ó (9 - 4)", answer: 10, theme: "R√®gles de calcul"},
            {question: "24 √∑ 6 + 8", answer: 12, theme: "R√®gles de calcul"},
            {question: "5 + 3 √ó 4", answer: 17, theme: "R√®gles de calcul"},
            {question: "(12 - 4) √∑ 2", answer: 4, theme: "R√®gles de calcul"},
            {question: "3¬≤", answer: 9, theme: "R√®gles de calcul"},
            {question: "5¬≤", answer: 25, theme: "R√®gles de calcul"},
            {question: "2¬≥", answer: 8, theme: "R√®gles de calcul"},
            {question: "4¬≤", answer: 16, theme: "R√®gles de calcul"},
            {question: "18 - 2 √ó 6", answer: 6, theme: "R√®gles de calcul"},
            {question: "(15 + 5) √∑ 4", answer: 5, theme: "R√®gles de calcul"},
            {question: "7 √ó 2 + 6", answer: 20, theme: "R√®gles de calcul"},

            // Questions 36-55: Num√©ration
            {question: "0,5 + 0,3", answer: 0.8, theme: "Num√©ration"},
            {question: "1,2 - 0,7", answer: 0.5, theme: "Num√©ration"},
            {question: "0,4 √ó 5", answer: 2, theme: "Num√©ration"},
            {question: "2,5 √∑ 5", answer: 0.5, theme: "Num√©ration"},
            {question: "1/2 + 1/4 (en d√©cimal)", answer: 0.75, theme: "Num√©ration"},
            {question: "3/4 - 1/4 (en d√©cimal)", answer: 0.5, theme: "Num√©ration"},
            {question: "1/5 en d√©cimal", answer: 0.2, theme: "Num√©ration"},
            {question: "3/10 en d√©cimal", answer: 0.3, theme: "Num√©ration"},
            {question: "0,25 en fraction (d√©nominateur)", answer: 4, theme: "Num√©ration"},
            {question: "0,6 √ó 10", answer: 6, theme: "Num√©ration"},
            {question: "12,5 √∑ 10", answer: 1.25, theme: "Num√©ration"},
            {question: "0,08 √ó 100", answer: 8, theme: "Num√©ration"},
            {question: "456 √∑ 100", answer: 4.56, theme: "Num√©ration"},
            {question: "2,3 + 1,7", answer: 4, theme: "Num√©ration"},
            {question: "5,6 - 2,8", answer: 2.8, theme: "Num√©ration"},
            {question: "0,7 √ó 3", answer: 2.1, theme: "Num√©ration"},
            {question: "1,8 √∑ 6", answer: 0.3, theme: "Num√©ration"},
            {question: "1/3 (arrondi √† 0,01)", answer: 0.33, theme: "Num√©ration"},
            {question: "2/3 (arrondi √† 0,01)", answer: 0.67, theme: "Num√©ration"},
            {question: "7/8 en d√©cimal", answer: 0.875, theme: "Num√©ration"},

            // Questions 56-80: Pourcentages
            {question: "10% de 50", answer: 5, theme: "Pourcentages"},
            {question: "20% de 80", answer: 16, theme: "Pourcentages"},
            {question: "25% de 60", answer: 15, theme: "Pourcentages"},
            {question: "50% de 90", answer: 45, theme: "Pourcentages"},
            {question: "75% de 40", answer: 30, theme: "Pourcentages"},
            {question: "30% de 120", answer: 36, theme: "Pourcentages"},
            {question: "15% de 200", answer: 30, theme: "Pourcentages"},
            {question: "5% de 300", answer: 15, theme: "Pourcentages"},
            {question: "40% de 150", answer: 60, theme: "Pourcentages"},
            {question: "60% de 250", answer: 150, theme: "Pourcentages"},
            {question: "Article √† 80‚Ç¨, -20%. Prix final?", answer: 64, theme: "Pourcentages"},
            {question: "Prix 150‚Ç¨, +10% de taxe. Total?", answer: 165, theme: "Pourcentages"},
            {question: "Salaire 1500‚Ç¨, +8%. Nouveau salaire?", answer: 1620, theme: "Pourcentages"},
            {question: "Population 2000, -15%. Nouvelle pop?", answer: 1700, theme: "Pourcentages"},
            {question: "Note 16/20 en pourcentage", answer: 80, theme: "Pourcentages"},
            {question: "12 √©l√®ves sur 30 en pourcentage", answer: 40, theme: "Pourcentages"},
            {question: "75 sur 150 en pourcentage", answer: 50, theme: "Pourcentages"},
            {question: "18 sur 24 en pourcentage", answer: 75, theme: "Pourcentages"},
            {question: "Augmentation de 200 √† 240 (en %)", answer: 20, theme: "Pourcentages"},
            {question: "R√©duction de 100 √† 85 (en %)", answer: 15, theme: "Pourcentages"},
            {question: "TVA 20% sur 500‚Ç¨. Montant TVA?", answer: 100, theme: "Pourcentages"},
            {question: "Remise 30% sur 90‚Ç¨. √âconomie?", answer: 27, theme: "Pourcentages"},
            {question: "Int√©r√™ts 3% sur 2000‚Ç¨", answer: 60, theme: "Pourcentages"},
            {question: "Commission 5% sur vente 800‚Ç¨", answer: 40, theme: "Pourcentages"},
            {question: "85% de r√©ussite sur 40 √©l√®ves", answer: 34, theme: "Pourcentages"}
        ];
        
        function getThemeIndicator(index) {
            if (index < 20) return "Calculs de base";
            if (index < 35) return "R√®gles de calcul";
            if (index < 55) return "Num√©ration";
            return "Pourcentages";
        }
        
        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            
            currentQuestionIndex = 0;
            correctAnswers = 0;
            totalQuestions = 0;
            userAnswers = [];
            startTime = new Date();
            
            // Reset theme scores
            for (let theme in themeScores) {
                themeScores[theme] = {correct: 0, total: 0};
            }
            
            startTimer();
            showQuestion();
        }
        
        function startTimer() {
            timerInterval = setInterval(function() {
                const now = new Date();
                const elapsed = Math.floor((now - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `Temps : ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }
        
        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endQuiz();
                return;
            }
            
            const question = questions[currentQuestionIndex];
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-counter').textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('score-display').textContent = `Score : ${correctAnswers} / ${totalQuestions}`;
            document.getElementById('theme-indicator').textContent = question.theme;
            document.getElementById('answer').value = '';
            document.getElementById('answer').focus();
            document.getElementById('feedback').textContent = '';
            
            // Update progress bar
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }
        
        function checkAnswer() {
            const userAnswer = parseFloat(document.getElementById('answer').value);
            const question = questions[currentQuestionIndex];
            const correctAnswer = question.answer;
            const feedback = document.getElementById('feedback');
            
            totalQuestions++;
            themeScores[question.theme].total++;
            
            // Store user answer
            userAnswers.push({
                question: question.question,
                userAnswer: userAnswer,
                correctAnswer: correctAnswer,
                isCorrect: userAnswer === correctAnswer,
                theme: question.theme
            });
            
            if (userAnswer === correctAnswer) {
                correctAnswers++;
                themeScores[question.theme].correct++;
                feedback.textContent = '‚úì Excellent ! Bonne r√©ponse !';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = `‚úó Pas tout √† fait... La r√©ponse √©tait ${correctAnswer}`;
                feedback.className = 'feedback incorrect';
            }
            
            setTimeout(function() {
                currentQuestionIndex++;
                showQuestion();
            }, 2000);
        }
        
        function skipQuestion() {
            const question = questions[currentQuestionIndex];
            totalQuestions++;
            themeScores[question.theme].total++;
            
            userAnswers.push({
                question: question.question,
                userAnswer: "Non r√©pondu",
                correctAnswer: question.answer,
                isCorrect: false,
                theme: question.theme
            });
            
            document.getElementById('feedback').textContent = '‚è≠Ô∏è Question pass√©e';
            document.getElementById('feedback').className = 'feedback';
            
            setTimeout(function() {
                currentQuestionIndex++;
                showQuestion();
            }, 1000);
        }
        
        function endQuiz() {
            clearInterval(timerInterval);
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);
            const now = new Date();
            const totalTime = Math.floor((now - startTime) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            
            document.getElementById('final-score').textContent = `${correctAnswers} / ${totalQuestions}`;
            document.getElementById('final-percentage').textContent = `${percentage}%`;
            document.getElementById('final-percent-text').textContent = `${percentage}%`;
            document.getElementById('final-time').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Message selon le score
            let message;
            if (percentage >= 90) message = "üèÜ Excellent travail ! Niveau ma√Ætris√© !";
            else if (percentage >= 80) message = "üéâ Tr√®s bien ! Bonne ma√Ætrise !";
            else if (percentage >= 70) message = "üëç Bien ! Quelques r√©visions √† pr√©voir";
            else if (percentage >= 60) message = "üìö Peut mieux faire, il faut r√©viser";
            else if (percentage >= 50) message = "‚ö†Ô∏è Difficult√©s importantes √† corriger";
            else message = "üö® Bases √† retravailler en priorit√©";
            
            document.getElementById('final-message').textContent = message;
            
            // Detailed theme breakdown
            let breakdown = "";
            for (let theme in themeScores) {
                const score = themeScores[theme];
                const themePercentage = score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0;
                breakdown += `<p><strong>${theme}:</strong> ${score.correct}/${score.total} (${themePercentage}%)</p>`;
            }
            document.getElementById('theme-breakdown').innerHTML = breakdown;
        }
        
        function showMistakes() {
            document.getElementById('results-screen').classList.add('hidden');
            document.getElementById('mistakes-screen').classList.remove('hidden');
            
            let mistakesList = "<h3>Questions √† retravailler :</h3>";
            userAnswers.forEach((answer, index) => {
                if (!answer.isCorrect) {
                    mistakesList += `
                        <div style="background: #fadbd8; padding: 15px; margin: 10px 0; border-radius: 8px;">
                            <strong>Question ${index + 1}:</strong> ${answer.question}<br>
                            <strong>Votre r√©ponse:</strong> ${answer.userAnswer}<br>
                            <strong>Bonne r√©ponse:</strong> ${answer.correctAnswer}<br>
                            <strong>Th√®me:</strong> ${answer.theme}
                        </div>
                    `;
                }
            });
            document.getElementById('mistakes-list').innerHTML = mistakesList;
        }
        
        function backToResults() {
            document.getElementById('mistakes-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
        }
        
        function restartQuiz() {
            document.getElementById('results-screen').classList.add('hidden');
            document.getElementById('mistakes-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
        }
        
        // G√©rer la touche Entr√©e
        document.getElementById('answer').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // Emp√™cher la soumission du formulaire
        document.getElementById('answer').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
